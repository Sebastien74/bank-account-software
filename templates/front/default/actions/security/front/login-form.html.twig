{% trans_default_domain 'front_default' %}

<div class="card form-container small-radius shadow">
    <div class="card-body form-ajax-container p-4">
        {% if secureActive %}
            {% include 'front/'~websiteTemplate~'/include/loader.html.twig' with {className: 'strict-size small-radius'} only %}
            <p class="text-uppercase text-bold mb-2">{{ "Je suis déjà membre"|trans }}</p>
            <h3 class="title text-uppercase mb-4">{{ "Se connecter"|trans }}</h3>
            {{ form_start(form, {attr: {
                novalidate: "novalidate",
                class: 'security',
                action: path('security_front_login'),
                id: "form-login",
                'data-component': "webpack-form"
            }}) }}
                <div class="row">
                    {% for field in form.children %}
                        {% if field.vars.name == '_remember_me' %}
                            <div class="col-sm-6 text-center text-sm-start">
                        {% endif %}
                        {% if field.vars.name == 'submit' %}
                            <div class="col-12">
                                {% if error %}
                                    {% include 'front/'~websiteTemplate~'/include/alert.html.twig' with {
                                        alert: 'danger', message: error.messageKey|trans(error.messageData, 'security'),
                                        alertClass: 'w-100'
                                    } only %}
                                {% endif %}
                                {% include 'front/'~websiteTemplate~'/include/flashbag.html.twig' with {
                                    alertClass: 'w-100'
                                } only%}
                            </div>
                            {% if 'facebookConnect' in security.frontRegistrationFields %}
                                <div class="col-lg-6">
                                    <a href="{{ path('security_front_connect_facebook_start') }}" class="btn btn-facebook w-100">
                                        {{ 'fab facebook-f'|icon(null, 16) }}
                                        {{ "Facebook"|trans|raw }}
                                    </a>
                                </div>
                            {% endif %}
                            {% if 'googleConnect' in security.frontRegistrationFields %}
                                <div class="col-lg-6">
                                    <a href="{{ path('security_front_connect_google_start') }}" class="btn btn-google w-100">
                                        {{ 'fab google'|icon(null, 16) }}
                                        {{ "Google"|trans|raw }}
                                    </a>
                                </div>
                            {% endif %}
                        {% endif %}
                            {{ form_row(form[field.vars.name]) }}
                        {% if field.vars.name == '_remember_me' %}
                            </div>
                            <div class="col-sm-6 text-center text-sm-end">
                                <a href="{{ path("security_front_password_request", {_locale: app.request.locale}) }}" id="to-recover"
                                   class="text-dark" data-toggle="preloader">
                                    <small class="text-italic">{{ 'Mot de passe oublié ?'|trans|raw }}</small>
                                </a>
                            </div>
                        {% endif %}
                    {% endfor %}
                    {% if separateForms and website.security.frontRegistration %}
                        <div class="col-12 text-center">
                            <span class="d-block w-100 mb-3 text-uppercase">{{ "Ou"|trans|raw }}</span>
                            <a href="{{ path('security_front_register') }}" class="btn btn-outline-primary text-uppercase w-100">
                                {{ "Inscrivez-vous"|trans|raw }}
                            </a>
                        </div>
                    {% endif %}
                </div>
                <div class="form-data" data-id="{{ website.security.securityKey }}" data-website="{{ websiteId() }}"></div>
            {{ form_end(form) }}
        {% else %}
            {% set message = app.request.get('tpl-form')
                ? "Pour afficher le formulaire, activer <strong>Modules sécurisés</strong>."
                : "Pour afficher le formulaire, activer <strong>Pages sécurisées</strong>." %}
            {% include 'front/'~websiteTemplate~'/include/alert.html.twig' with {alert: "warning", message: message} only %}
        {% endif %}
    </div>
</div>